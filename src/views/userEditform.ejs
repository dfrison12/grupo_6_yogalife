<!DOCTYPE html>
<html lang="en">
    <!-- Head -->
    <%- include ('./partials/head',{title:'Registra tu usuario', style:'registerStyles.css'}) %>
<body>
    <!-- Header -->
    <%- include ('./partials/header') %> 

    <main>

        <section class="formSection"> 

        <h2 class="text">EDITA TUS DATOS      /<a href="/login" class="login">      PERFIL</a> </h2>
   
        <form class="form" id="form" action="/user/update?_method=PUT" method="POST" enctype="multipart/form-data">
            <div id="registerForms">
                <label for="fullname">Nombre y apellido</label>
                <input type="text" class="box" id="name"   name="fullname" placeholder="Nombres" value="<%= locals.oldData ? oldData.fullname : userLogged.full_name%>">
                    <div class="errorsfullname">
                        <ul></ul>
                    </div>
                    <% if (locals.errors && errors.fullname) { %>
                        <div class="errorsfullname">
                            <ul>
                                <li>
                                    <%= errors.fullname.msg%>
                                </li>
                            </ul>
                        </div>
                    <% } %>
                <input type="text" class="box" id="dni"   name="dni" placeholder="D.N.I" value="<%= locals.oldData ? oldData.dni : userLogged.dni %>">
                    <div class="errorsdni">
                        <ul></ul>
                    </div>
                    <% if (locals.errors && errors.dni) { %>
                        <div class="errorsdni">
                            <ul>
                                <li>
                                    <%= errors.dni.msg%>
                                </li>
                            </ul>
                        </div>
                    <% } %>
                <label for="address">Direccion</label>
                <input type="text" class="box" id="address"   name="address" placeholder="Direccion" value="<%= locals.oldData ? oldData.address : userLogged.address %>">
                    <div class="errorsaddress">
                        <ul></ul>
                    </div>
                    <% if (locals.errors && errors.address) { %>
                        <div class="errorsaddress">
                            <ul>
                                <li>
                                    <%= errors.address.msg%>
                                </li>
                            </ul>
                        </div>
                    <% } %>
            </div>

            <h4 class="text">Perfil del usuario</h4>
            <select name="user_category_id" id="category" class="select-input" required>
                <% if ( userLogged.user_category_id == 1 ) { %>
                <option value="1" selected>
                    Usuario
                </option>
                <option value="2">
                    Administrador
                </option>
                <% } %>
                <% if ( userLogged.user_category_id == 2 ) { %>
                <option value="1" >
                    Usuario
                </option>
                <option value="2" selected>
                    Administrador
                </option>
                <% } %>
            </select>

            <h4 class="text">DATOS DE ACCESO</h4>
            <label for="email">Correo electronico</label>
            <input type="text" class="box" name="email" id="email" placeholder="E-mail" value="<%= locals.oldData ? oldData.email : userLogged.email %>">
                <div class="errorsemail">
                    <ul></ul>
                </div>
                <% if (locals.errors && errors.email) { %>
                <div class="errorsemail">
                    <ul>
                        <li>
                            <%= errors.email.msg%>
                        </li>
                    </ul>
                </div>
                <% } %>

            <label for="password">Contrase√±a</label>
            <input type="password"  name="password"  class="box"  id="password">
                <div class="errorspassword">
                    <ul></ul>
                </div>
                <% if (locals.errors && errors.password) { %>
                    <div class="errorspassword">
                        <ul>
                            <li>
                                <%= errors.password.msg%>
                            </li>
                        </ul>
                    </div>
                <% } %>
            <label for="image" class="file-input">FOTO DE PERFIL</label>
            <input type="file" name="image" id="image" class="box">
                <div class="errorsimage">
                    <ul></ul>
                </div>
                <% if (locals.errors && errors.image) { %>
                    <div class="errorsimage">
                        <ul>
                            <li>
                                <%= errors.image.msg %>  
                            </li>
                        </ul>
                    </div>
                <% } %> 

            <div class="button">
            <button type="submit" id="confirm-button">Confirmar</button>
            </div>

        </form>

        </section>  

        <section class="imgSection">       
        <!-- <img id="registerImg" src="/images/yogalifebackground.png" alt="ImageYogalife">-->
        </section>  

    </main>

    <!-- Footer -->
    <%- include('./partials/footer')%>       
    <script src='/js/validatorUserEdit.js'></script>    
    <script src='/js/userEditForm.js'></script>    
</body>
</html>